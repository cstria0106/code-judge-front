import{s as ae,F as G,o as re,G as H,f as $,a as v,g as _,H as N,c as x,i as B,D as O,d as g,h as J,j as m,w as p,J as Z,E as oe,l as le,m as ie}from"../chunks/scheduler.cf24fc46.js";import{S as fe,i as ce,b as V,d as U,m as q,a as A,t as M,e as z}from"../chunks/index.1a695a89.js";import{g as ee}from"../chunks/navigation.fdbf8aa6.js";import{g as te}from"../chunks/api.5d704809.js";import{B as ue}from"../chunks/BoxTitle.39ecf30e.js";import{P as me}from"../chunks/Problems.e2d300c9.js";import{B as pe}from"../chunks/Box.dae89304.js";import{O as de}from"../chunks/Orientation.5c54c58d.js";import{a as se}from"../chunks/module.169a8bc7.js";import{h as ne}from"../chunks/moment.fbc5633a.js";import{w as W}from"../chunks/index.aee107d7.js";const K=W(!1),Q=W(!1),R=W("");function he(o){let t;return{c(){t=le("Manage Problems")},l(r){t=ie(r,"Manage Problems")},m(r,e){B(r,t,e)},d(r){r&&g(t)}}}function $e(o){let t,r,e,a,c="Search:",d,f,l,u,C,b,L="Show ended",i,h,T,k,y="Show drafts",j,P,D,S,w,I,F,X;return t=new ue({props:{$$slots:{default:[he]},$$scope:{ctx:o}}}),w=new me({props:{pages:[Promise.resolve(o[3])]}}),w.$on("clickProblem",o[9]),{c(){V(t.$$.fragment),r=v(),e=$("div"),a=$("label"),a.textContent=c,d=v(),f=$("input"),l=v(),u=$("div"),C=v(),b=$("label"),b.textContent=L,i=v(),h=$("input"),T=v(),k=$("label"),k.textContent=y,j=v(),P=$("input"),D=v(),S=$("div"),V(w.$$.fragment),this.h()},l(s){U(t.$$.fragment,s),r=x(s),e=_(s,"DIV",{class:!0});var n=J(e);a=_(n,"LABEL",{for:!0,"data-svelte-h":!0}),N(a)!=="svelte-1tn9osg"&&(a.textContent=c),d=x(n),f=_(n,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),l=x(n),u=_(n,"DIV",{class:!0}),J(u).forEach(g),C=x(n),b=_(n,"LABEL",{for:!0,"data-svelte-h":!0}),N(b)!=="svelte-1w4qz7o"&&(b.textContent=L),i=x(n),h=_(n,"INPUT",{id:!0,type:!0}),T=x(n),k=_(n,"LABEL",{for:!0,"data-svelte-h":!0}),N(k)!=="svelte-15qi2z5"&&(k.textContent=y),j=x(n),P=_(n,"INPUT",{id:!0,type:!0}),n.forEach(g),D=x(s),S=_(s,"DIV",{class:!0});var E=J(S);U(w.$$.fragment,E),E.forEach(g),this.h()},h(){m(a,"for","search"),m(f,"id","search"),m(f,"type","text"),m(f,"class","text-xs p-1"),m(f,"placeholder","Name"),m(u,"class","flex-1"),m(b,"for","show-all"),m(h,"id","show-all"),m(h,"type","checkbox"),m(k,"for","show-drafts"),m(P,"id","show-drafts"),m(P,"type","checkbox"),m(e,"class","flex flex-row gap-x-2 items-center mb-4"),m(S,"class","h-[400px] overflow-y-scroll border border-gray-300 p-4 rounded-md")},m(s,n){q(t,s,n),B(s,r,n),B(s,e,n),p(e,a),p(e,d),p(e,f),Z(f,o[0]),p(e,l),p(e,u),p(e,C),p(e,b),p(e,i),p(e,h),h.checked=o[2],p(e,T),p(e,k),p(e,j),p(e,P),P.checked=o[1],B(s,D,n),B(s,S,n),q(w,S,null),I=!0,F||(X=[O(f,"input",o[6]),O(h,"change",o[7]),O(P,"change",o[8])],F=!0)},p(s,n){const E={};n&1024&&(E.$$scope={dirty:n,ctx:s}),t.$set(E),n&1&&f.value!==s[0]&&Z(f,s[0]),n&4&&(h.checked=s[2]),n&2&&(P.checked=s[1]);const Y={};n&8&&(Y.pages=[Promise.resolve(s[3])]),w.$set(Y)},i(s){I||(A(t.$$.fragment,s),A(w.$$.fragment,s),I=!0)},o(s){M(t.$$.fragment,s),M(w.$$.fragment,s),I=!1},d(s){s&&(g(r),g(e),g(D),g(S)),z(t,s),z(w),F=!1,oe(X)}}}function _e(o){let t,r="Create",e,a,c,d,f;return a=new pe({props:{$$slots:{default:[$e]},$$scope:{ctx:o}}}),{c(){t=$("button"),t.textContent=r,e=v(),V(a.$$.fragment)},l(l){t=_(l,"BUTTON",{"data-svelte-h":!0}),N(t)!=="svelte-155es9o"&&(t.textContent=r),e=x(l),U(a.$$.fragment,l)},m(l,u){B(l,t,u),B(l,e,u),q(a,l,u),c=!0,d||(f=O(t,"click",o[4]),d=!0)},p(l,u){const C={};u&1039&&(C.$$scope={dirty:u,ctx:l}),a.$set(C)},i(l){c||(A(a.$$.fragment,l),c=!0)},o(l){M(a.$$.fragment,l),c=!1},d(l){l&&(g(t),g(e)),z(a,l),d=!1,f()}}}function ge(o){let t,r;return t=new de({props:{vertical:!0,$$slots:{default:[_e]},$$scope:{ctx:o}}}),{c(){V(t.$$.fragment)},l(e){U(t.$$.fragment,e)},m(e,a){q(t,e,a),r=!0},p(e,[a]){const c={};a&1039&&(c.$$scope={dirty:a,ctx:e}),t.$set(c)},i(e){r||(A(t.$$.fragment,e),r=!0)},o(e){M(t.$$.fragment,e),r=!1},d(e){z(t,e)}}}function be(o,t,r){let e,a,c;G(o,R,i=>r(0,e=i)),G(o,Q,i=>r(1,a=i)),G(o,K,i=>r(2,c=i));let d=[],f=[];re(async()=>{r(5,d=await se.functional.problem.manage.manageList(te()).then(i=>i.problems))});async function l(){const i=await se.functional.problem.manage.manageCreate(te());ee(`/manage/problems/${i.problem.id}`)}function u(){e=this.value,R.set(e)}function C(){c=this.checked,K.set(c)}function b(){a=this.checked,Q.set(a)}const L=i=>ee(`/manage/problems/${i.detail.id}`);return o.$$.update=()=>{o.$$.dirty&39&&r(3,f=d.filter(i=>{const h=ne();return!(H(K)===!1&&ne(i.endTime).endOf("minute").isSameOrBefore(h)||H(Q)===!1&&i.startTime===null||H(R).split(/\s+/).some(y=>!i.name.toLowerCase().includes(y.toLowerCase())))}))},[e,a,c,f,l,d,u,C,b,L]}class ye extends fe{constructor(t){super(),ce(this,t,be,ge,ae,{})}}export{ye as component};
