import{s as tt,e as Y,i as E,d as k,a as m,f,c as d,g as p,h as et,H as U,j as y,w as o,J as T,D as q,E as nt,l as st,m as at}from"../chunks/scheduler.cf24fc46.js";import{S as rt,i as lt,b as F,d as J,m as z,a as x,t as D,e as G,g as ot,c as it}from"../chunks/index.1a695a89.js";import{g as ut}from"../chunks/api.4c769691.js";import{B as ft}from"../chunks/BoxTitle.39ecf30e.js";import{U as pt}from"../chunks/UserOnly.fafdb4d7.js";import{B as ct}from"../chunks/Box.dae89304.js";import{r as mt}from"../chunks/error.154d35b7.js";import{a as dt,l as _t}from"../chunks/module.169a8bc7.js";import{t as A}from"../chunks/Toaster.svelte_svelte_type_style_lang.e3dffc4c.js";function Z(l){let e,a;return e=new ct({props:{$$slots:{default:[vt]},$$scope:{ctx:l}}}),{c(){F(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,n){z(e,t,n),a=!0},p(t,n){const i={};n&195&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){a||(x(e.$$.fragment,t),a=!0)},o(t){D(e.$$.fragment,t),a=!1},d(t){G(e,t)}}}function $t(l){let e;return{c(){e=st("Edit User Information")},l(a){e=at(a,"Edit User Information")},m(a,t){E(a,e,t)},d(a){a&&k(e)}}}function vt(l){let e,a,t,n,i="ID",I,u,g,P,c,K="Name",B,_,N,V,w,L="New password",S,$,H,C,Q="New password (again)",M,v,O,h,R="Save",b,j,W;return e=new ft({props:{$$slots:{default:[$t]},$$scope:{ctx:l}}}),{c(){F(e.$$.fragment),a=m(),t=f("div"),n=f("div"),n.textContent=i,I=m(),u=f("input"),P=m(),c=f("div"),c.textContent=K,B=m(),_=f("input"),V=m(),w=f("div"),w.textContent=L,S=m(),$=f("input"),H=m(),C=f("div"),C.textContent=Q,M=m(),v=f("input"),O=m(),h=f("button"),h.textContent=R,this.h()},l(r){J(e.$$.fragment,r),a=d(r),t=p(r,"DIV",{class:!0});var s=et(t);n=p(s,"DIV",{"data-svelte-h":!0}),U(n)!=="svelte-1mtr7hb"&&(n.textContent=i),I=d(s),u=p(s,"INPUT",{type:!0}),P=d(s),c=p(s,"DIV",{"data-svelte-h":!0}),U(c)!=="svelte-ylpshh"&&(c.textContent=K),B=d(s),_=p(s,"INPUT",{type:!0}),V=d(s),w=p(s,"DIV",{"data-svelte-h":!0}),U(w)!=="svelte-1cd8su1"&&(w.textContent=L),S=d(s),$=p(s,"INPUT",{type:!0}),H=d(s),C=p(s,"DIV",{"data-svelte-h":!0}),U(C)!=="svelte-19sp7ag"&&(C.textContent=Q),M=d(s),v=p(s,"INPUT",{type:!0}),O=d(s),h=p(s,"BUTTON",{class:!0,"data-svelte-h":!0}),U(h)!=="svelte-1mgh9lr"&&(h.textContent=R),s.forEach(k),this.h()},h(){y(u,"type","text"),u.value=g=l[6].id,u.disabled=!0,y(_,"type","text"),_.value=N=l[6].name,_.disabled=!0,y($,"type","password"),y(v,"type","password"),y(h,"class","col-span-2"),y(t,"class","w-full grid grid-cols-[auto_1fr] items-center gap-4 [&>div]:text-sm")},m(r,s){z(e,r,s),E(r,a,s),E(r,t,s),o(t,n),o(t,I),o(t,u),o(t,P),o(t,c),o(t,B),o(t,_),o(t,V),o(t,w),o(t,S),o(t,$),T($,l[0]),o(t,H),o(t,C),o(t,M),o(t,v),T(v,l[1]),o(t,O),o(t,h),b=!0,j||(W=[q($,"input",l[3]),q(v,"input",l[4]),q(h,"click",l[2])],j=!0)},p(r,s){const X={};s&128&&(X.$$scope={dirty:s,ctx:r}),e.$set(X),(!b||s&64&&g!==(g=r[6].id)&&u.value!==g)&&(u.value=g),(!b||s&64&&N!==(N=r[6].name)&&_.value!==N)&&(_.value=N),s&1&&$.value!==r[0]&&T($,r[0]),s&2&&v.value!==r[1]&&T(v,r[1])},i(r){b||(x(e.$$.fragment,r),b=!0)},o(r){D(e.$$.fragment,r),b=!1},d(r){r&&(k(a),k(t)),G(e,r),j=!1,nt(W)}}}function ht(l){let e,a,t=l[6]&&Z(l);return{c(){t&&t.c(),e=Y()},l(n){t&&t.l(n),e=Y()},m(n,i){t&&t.m(n,i),E(n,e,i),a=!0},p(n,i){n[6]?t?(t.p(n,i),i&64&&x(t,1)):(t=Z(n),t.c(),x(t,1),t.m(e.parentNode,e)):t&&(ot(),D(t,1,1,()=>{t=null}),it())},i(n){a||(x(t),a=!0)},o(n){D(t),a=!1},d(n){n&&k(e),t&&t.d(n)}}}function gt(l){let e,a;return e=new pt({props:{$$slots:{default:[ht,({user:t})=>({6:t}),({user:t})=>t?64:0]},$$scope:{ctx:l}}}),{c(){F(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,n){z(e,t,n),a=!0},p(t,[n]){const i={};n&195&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){a||(x(e.$$.fragment,t),a=!0)},o(t){D(e.$$.fragment,t),a=!1},d(t){G(e,t)}}}function wt(l,e,a){let t="",n="";function i(){return t!==n?(A.error("New password does not match"),!1):!0}async function I(){if(i())try{await dt.functional.user.my.updateMyUser(ut(),{password:t.length>0?t:void 0}),history.back(),A.success("Successfully updated user information")}catch(c){c instanceof _t.HttpError&&A.error(`Failed to update: ${mt(c)}`)}}function u(){t=this.value,a(0,t)}function g(){n=this.value,a(1,n)}return[t,n,I,u,g]}class Pt extends rt{constructor(e){super(),lt(this,e,wt,gt,tt,{})}}export{Pt as component};
