import{s as z,e as E,i as v,d as b,p as M,a as P,c as T,P as q,l as G,m as J}from"../chunks/scheduler.ab7c2898.js";import{S as K,i as L,b as c,d as _,m as d,a as i,t as p,e as g,g as Q,c as R,f as x}from"../chunks/index.956fb253.js";import{g as V}from"../chunks/api.329286e0.js";import{U as W}from"../chunks/UserOnly.3db11516.js";import{r as X,F as Y,P as A}from"../chunks/error.d7bc1be4.js";import{a as Z,b as ee}from"../chunks/index.fdebff07.js";import{t as h}from"../chunks/Toaster.svelte_svelte_type_style_lang.47810070.js";import{T as D}from"../chunks/TextInput.18e2d896.js";import{B as te}from"../chunks/Button.e47fd731.js";function H(o){let s,a;return s=new Y({props:{class:"flex flex-col gap-y-4",$$slots:{default:[ne]},$$scope:{ctx:o}}}),{c(){c(s.$$.fragment)},l(e){_(s.$$.fragment,e)},m(e,n){d(s,e,n),a=!0},p(e,n){const r={};n&195&&(r.$$scope={dirty:n,ctx:e}),s.$set(r)},i(e){a||(i(s.$$.fragment,e),a=!0)},o(e){p(s.$$.fragment,e),a=!1},d(e){g(s,e)}}}function se(o){let s;return{c(){s=G("Save")},l(a){s=J(a,"Save")},m(a,e){v(a,s,e)},d(a){a&&b(s)}}}function ne(o){let s,a,e,n,r,k,w,f,$,m,l,y;s=new D({props:{labelText:"ID",value:o[6].id,readonly:!0}}),e=new D({props:{labelText:"Name",value:o[6].name,readonly:!0}});function O(t){o[3](t)}let N={labelText:"New password",helperText:"Password must be at least 8 characters long"};o[0]!==void 0&&(N.value=o[0]),r=new A({props:N}),M.push(()=>x(r,"value",O));function j(t){o[4](t)}let S={labelText:"New password (again)"};return o[1]!==void 0&&(S.value=o[1]),f=new A({props:S}),M.push(()=>x(f,"value",j)),l=new te({props:{$$slots:{default:[se]},$$scope:{ctx:o}}}),l.$on("click",o[2]),{c(){c(s.$$.fragment),a=P(),c(e.$$.fragment),n=P(),c(r.$$.fragment),w=P(),c(f.$$.fragment),m=P(),c(l.$$.fragment)},l(t){_(s.$$.fragment,t),a=T(t),_(e.$$.fragment,t),n=T(t),_(r.$$.fragment,t),w=T(t),_(f.$$.fragment,t),m=T(t),_(l.$$.fragment,t)},m(t,u){d(s,t,u),v(t,a,u),d(e,t,u),v(t,n,u),d(r,t,u),v(t,w,u),d(f,t,u),v(t,m,u),d(l,t,u),y=!0},p(t,u){const F={};u&64&&(F.value=t[6].id),s.$set(F);const I={};u&64&&(I.value=t[6].name),e.$set(I);const U={};!k&&u&1&&(k=!0,U.value=t[0],q(()=>k=!1)),r.$set(U);const B={};!$&&u&2&&($=!0,B.value=t[1],q(()=>$=!1)),f.$set(B);const C={};u&128&&(C.$$scope={dirty:u,ctx:t}),l.$set(C)},i(t){y||(i(s.$$.fragment,t),i(e.$$.fragment,t),i(r.$$.fragment,t),i(f.$$.fragment,t),i(l.$$.fragment,t),y=!0)},o(t){p(s.$$.fragment,t),p(e.$$.fragment,t),p(r.$$.fragment,t),p(f.$$.fragment,t),p(l.$$.fragment,t),y=!1},d(t){t&&(b(a),b(n),b(w),b(m)),g(s,t),g(e,t),g(r,t),g(f,t),g(l,t)}}}function ae(o){let s,a,e=o[6]&&H(o);return{c(){e&&e.c(),s=E()},l(n){e&&e.l(n),s=E()},m(n,r){e&&e.m(n,r),v(n,s,r),a=!0},p(n,r){n[6]?e?(e.p(n,r),r&64&&i(e,1)):(e=H(n),e.c(),i(e,1),e.m(s.parentNode,s)):e&&(Q(),p(e,1,1,()=>{e=null}),R())},i(n){a||(i(e),a=!0)},o(n){p(e),a=!1},d(n){n&&b(s),e&&e.d(n)}}}function re(o){let s,a;return s=new W({props:{$$slots:{default:[ae,({user:e})=>({6:e}),({user:e})=>e?64:0]},$$scope:{ctx:o}}}),{c(){c(s.$$.fragment)},l(e){_(s.$$.fragment,e)},m(e,n){d(s,e,n),a=!0},p(e,[n]){const r={};n&195&&(r.$$scope={dirty:n,ctx:e}),s.$set(r)},i(e){a||(i(s.$$.fragment,e),a=!0)},o(e){p(s.$$.fragment,e),a=!1},d(e){g(s,e)}}}function oe(o,s,a){let e="",n="";function r(){return e!==n?(h.error("New password does not match"),!1):!0}async function k(){if(r())try{await Z.functional.user.my.updateMyUser(V(),{password:e.length>0?e:void 0}),history.back(),h.success("Successfully updated user information")}catch(m){m instanceof ee.HttpError&&h.error(`Failed to update: ${X(m)}`)}}function w($){e=$,a(0,e)}function f($){n=$,a(1,n)}return[e,n,k,w,f]}class de extends K{constructor(s){super(),L(this,s,oe,re,z,{})}}export{de as component};
